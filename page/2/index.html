<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Yitao's Blog</title><meta name="author" content="Wang Yitao"><meta name="copyright" content="Wang Yitao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Yitao&#39;s Blog">
<meta property="og:url" content="https://zjuytw.github.io/page/2/index.html">
<meta property="og:site_name" content="Yitao&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zjuytw.github.io/img/ichigo1.jpg">
<meta property="article:author" content="Wang Yitao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zjuytw.github.io/img/ichigo1.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zjuytw.github.io/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Yitao\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-06-26 12:08:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Yitao's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/ichigo1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">100</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">52</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div></div></div><hr/></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/GbjolrOH.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Yitao's Blog</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Yitao's Blog</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/30/Lab6%20COW/" title="MIT6.S081 Lab6">MIT6.S081 Lab6</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-01-30T09:02:37.012Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MIT6-S081/">MIT6.S081</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MIT6-S081/">MIT6.S081</a></span></div><div class="content">Lab6 COWCopy-on-write on xv6In this lab, we need to implement COW on xv6. The idea of the lab is quite straight forward but there are some subtle detailsneeds to be treated carefully.
Main idea of the lab, is to lazily allocate the physical page to child process. This lab takes almost 15h to debug (what fk), so I will give a detailed description of how I code and hope to give a rather clear idea.

Firstly, define some utils functions to manipulate refrence count table
int get_ref(uint64 pa) // r ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/30/Lab5%20Lazy%20Allocation/" title="MIT6.S081 Lab5">MIT6.S081 Lab5</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-01-30T09:02:37.010Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MIT6-S081/">MIT6.S081</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MIT6-S081/">MIT6.S081</a></span></div><div class="content">Lab 5 Lazy AllocationIn this lab, we gonna implement lazy allocation which means delay the true memory allocation till we actually needs it.
lazy sbrk()To start with, we should modify the sbrk() from eager allocation to lazy one.But we should note that the parameter n can be arbitary number, either + or - so once the number is positve do the lazy allocation, but if the number is negative, we should do the deallocation immediately.
Lazy AllocationThe time to truely allocate a page, is when kernel ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/30/Lab4%20Traps/" title="MIT6.S081 Lab4">MIT6.S081 Lab4</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-01-30T09:02:37.008Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MIT6-S081/">MIT6.S081</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MIT6-S081/">MIT6.S081</a></span></div><div class="content">Lab4Part2 –Backtracebacktrace is the method that prints the address of call stack. To implement backtrace, we should know some key points :  

In RISC-V, stack grows from high to low.
fp points to the start of a function(highest address), then Return Address (offset by -8), then previous frame pointer address(offset by -16)
We should print the address of Return Address(means the address of code)
Stack size are 1 PGSIZE and aligned.  

So we just need to fetch the frame pointer by the follower as ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/30/Lab3%20Page%20Table/" title="MIT6.S081 Lab3">MIT6.S081 Lab3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-01-30T09:02:37.006Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MIT6-S081/">MIT6.S081</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MIT6-S081/">MIT6.S081</a></span></div><div class="content">Lab3 pagetable In this lab, we will modify the pagetable, and finally be able to dereference pointers in the kernel mode.
Lab1–Print page table In this lab, it’s much easier than later two lab that we just need to write a DFS recursive function to walk down the 3-level pagetable and print out the path.  
Check vm.c/freewalk() and dfs the pagetable, note the format of a virtual memory address.![](Lab3 Page Table/lab3-pic1.png)We should notice that different from intel’s pagetable, xv6 store the P ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/30/Lab2%20Syscalls/" title="MIT6.S081 Lab2">MIT6.S081 Lab2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-01-30T09:02:37.004Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MIT6-S081/">MIT6.S081</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MIT6-S081/">MIT6.S081</a></span></div><div class="content">System Calls(pending the challenge)

In the lab, we will get deeper into OS than the previous one. We are about to implement the ‘bridge’ between user and kernel mode, then implement two specific syscall to be called by user’s program.
Lab

The two labs are symmetry overall, so I just describe how to do a system call.
To make our own syscalls,we should know how the syscall works between user &amp; kernel mode.
1234567						   user function							     ↓					      wrapped interface---------------- ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/30/Lab1%20Unix%20utilities/" title="MIT6.S081 Lab1">MIT6.S081 Lab1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-01-30T09:02:37.002Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MIT6-S081/">MIT6.S081</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MIT6-S081/">MIT6.S081</a></span></div><div class="content">Xv6 and Unix utilities

In this lab, we gonna implement many interesting and useful programs like, sleep, pingpong, primes, find, and xargs . There are some points I want to emphasize, though this lab is not so hard.
Before Start

My experiment environment:
12VM: VMware workstationLinux ubuntu 20.04

 I can not find corresponding software in apt-get when my kernel was at 16.04 or 18.04, so I have to update to 20.04.
Lab

The structure we should know before programming is that, there are kernel’s ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/12/14/484.%20Find%20Permutation/" title="484. Find Permutation">484. Find Permutation</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-14T08:27:10.099Z" title="Created 2021-12-14 16:27:10">2021-12-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Tricky/">Tricky</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Permutation/">Permutation</a></span></div><div class="content">484. Find PermutationDescription


Solution

Recall how to generate a next_permutation, the way we do to keep the permutation small is just reverse the left-most reverse pair. In this question, we just keep a ‘123456… n’ basic permutation then reverse the substr that contiguous ‘D’ point at. 
eg.

Code

1234567891011121314151617181920212223class Solution &#123;public:    vector&lt;int&gt; findPermutation(string s) &#123;        int n = s.size() + 1;        vector&lt;int&gt; res;        for(int i ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/12/06/668.%20Kth%20Smallest%20Number%20in%20Multiplication%20Table/" title="668. Kth Smallest Number in Multiplication Table">668. Kth Smallest Number in Multiplication Table</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-06T07:51:11.036Z" title="Created 2021-12-06 15:51:11">2021-12-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Binary-Search/">Binary Search</a></span></div><div class="content">668. Kth Smallest Number in Multiplication Table

Description



Solution

Generally, k-th related problem could be solved by binary search to guess the right answer and verify.  Once we enumerate a number, we could calculate its rank. 
Another important thing we should notice is that we calculate the elements number that less equal than the target one.
Code

123456789101112131415161718192021222324class Solution &#123;public:    int findKthNumber(int m, int n, int k) &#123;        int l = 1, r = ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/12/06/757.%20Set%20Intersection%20Size%20At%20Least%20Two/" title="757. Set Intersection Size At Least Two">757. Set Intersection Size At Least Two</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-06T07:51:11.034Z" title="Created 2021-12-06 15:51:11">2021-12-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Greedy/">Greedy</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Interval/">Interval</a></span></div><div class="content">757. Set Intersection Size At Least TwoDescription



Solution

Refer to 452 452. Minimum Number of Arrows to Burst Balloons. These two questions are very similar.
We need to greedily find the maximum non-overlapping intervals.
And the template should always sort the intervals by endpoints and see if we could pick elements greedily to fit the requirement.
Code

12345678910111213141516171819202122232425262728class Solution &#123;public:    int intersectionSizeTwo(vector&lt;vector&lt;int&gt;&gt;&a ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/11/17/1235.%20Maximum%20Profit%20in%20Job%20Scheduling/" title="1235. Maximum Profit in Job Scheduling">1235. Maximum Profit in Job Scheduling</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-11-17T07:41:52.466Z" title="Created 2021-11-17 15:41:52">2021-11-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/DP/">DP</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Binary-Search/">Binary Search</a></span></div><div class="content">1235. Maximum Profit in Job Scheduling

Description



Solution

Time interval question.
An simple intuition should be, if we find a best solution for a previous time, then we could use this information to calculate the later one with startTime[i] &gt; endTime[i-1].
So we could use binary search to find the endTime suitable for current startTime.
To use bs, we need sort by endTime.
Code

1234567891011121314151617181920212223242526272829303132class Solution &#123;public:    int jobScheduling(vect ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/11/16/1627.%20Graph%20Connectivity%20With%20Threshold/" title="1627. Graph Connectivity With Threshold">1627. Graph Connectivity With Threshold</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-11-15T16:53:17.255Z" title="Created 2021-11-16 00:53:17">2021-11-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/No-AC-first-time/">No AC first time</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Tricky/">Tricky</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Union-Find/">Union-Find</a></span></div><div class="content">1627. Graph Connectivity With Threshold

Description





Solution

Obviously we need to use UF set.
The problem here is how to enumerate the gcd of two number. I firstly just iterate n^2 numbers pairs and try to find their common factors and got TLE.
–&gt; We could start from the factor and to enumerate its multiples. 
Code

1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class UF&#123;    public:    vector&lt;int&gt; uf, size;    UF(int n):uf(n), size ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/09/23/1944.%20Number%20of%20Visible%20People%20in%20a%20Queue/" title="1944. Number of Visible People in a Queue">1944. Number of Visible People in a Queue</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-23T15:03:16.859Z" title="Created 2021-09-23 23:03:16">2021-09-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Monotone-Stack/">Monotone Stack</a></span></div><div class="content">1944. Number of Visible People in a Queue

Description



Solution

Using monotone stack, look into preceding first number larger than current one.
Code

123456789101112131415161718class Solution &#123;public:    vector&lt;int&gt; canSeePersonsCount(vector&lt;int&gt;&amp; heights) &#123;        int n = heights.size();        vector&lt;int&gt; res(n, 0);        stack&lt;int&gt; stk;        for(int i = n-1; i &gt;= 0; i--)&#123;            while(!stk.empty() &amp;&amp; stk.top() &lt; heights[i])&# ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/09/16/1998.%20GCD%20Sort%20of%20an%20Array/" title="1998. GCD Sort of an Array">1998. GCD Sort of an Array</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-15T16:17:28.049Z" title="Created 2021-09-16 00:17:28">2021-09-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/No-AC-first-time/">No AC first time</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Union-Find/">Union Find</a></span></div><div class="content">1998. GCD Sort of an Array

Description



Solution

Because we are using gcd to transfer numbers, so the number which shares the same factor should in the same set. So we could use Union-Find to mark numbers.
There is also a tricky point that how to get the prime factor of one number.
https://www.geeksforgeeks.org/print-all-prime-factors-of-a-given-number/
Code

12345678910111213141516171819202122232425262728293031323334353637383940414243444546const  int N = 1E5+1;class Solution &#123;        i ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/09/16/2002.%20Maximum%20Product%20of%20the%20Length%20of%20Two%20Palindromic%20Subsequences/" title="2002. Maximum Product of the Length of Two Palindromic Subsequences">2002. Maximum Product of the Length of Two Palindromic Subsequences</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-15T16:17:28.046Z" title="Created 2021-09-16 00:17:28">2021-09-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/No-AC-first-time/">No AC first time</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/State-Compression/">State Compression</a></span></div><div class="content">2002. Maximum Product of the Length of Two Palindromic Subsequences

Description



Solution

We could enumerate all the potential substring then check if they are palindromic by using state compression.
Then we iterate the subset of the inverse state to check if two substring are compatible.
Code

1234567891011121314151617181920212223242526272829303132333435363738394041424344class Solution &#123;public:    int maxProduct(string s) &#123;        int n = s.size();        vector&lt;bool&gt; dp(1 & ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/09/11/1894.%20Find%20the%20Student%20that%20Will%20Replace%20the%20Chalk/" title="1894. Find the Student that Will Replace the Chalk">1894. Find the Student that Will Replace the Chalk</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-10T17:11:51.276Z" title="Created 2021-09-11 01:11:51">2021-09-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Leetcode/">Leetcode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Prefix-Sum/">Prefix Sum</a></span></div><div class="content">1894. Find the Student that Will Replace the Chalk

Description



Solution

presum + binary search
Code

12345678910111213class Solution &#123;public:    int chalkReplacer(vector&lt;int&gt;&amp; chalk, int k) &#123;        if(chalk[0] &gt; k) return 0;        for(int i = 1; i &lt; chalk.size(); i++)&#123;            chalk[i] += chalk[i-1];            if(chalk[i] &gt; k) return i;         &#125;        k %= chalk.back();        int pos = upper_bound(chalk.begin(), chalk.end(), k) - chalk.begin() ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/#content-inner">7</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/ichigo1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Wang Yitao</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">100</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">52</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ZjuYTW"><i class="fab fa-github"></i><span>My Github</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">My personal website, writing for fun and sharing knowledge</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/06/25/Memory%20Order%E6%B5%85%E6%9E%90(%E4%BB%A5LevelDB%E4%B8%AD%E7%9A%84%E8%B7%B3%E8%A1%A8%E4%B8%BA%E4%BE%8B)/" title="Memory Order浅析（以LevelDB中的跳表为例）">Memory Order浅析（以LevelDB中的跳表为例）</a><time datetime="2022-06-25T05:50:48.000Z" title="Created 2022-06-25 13:50:48">2022-06-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/30/Lec13--%20Ex3%20Recovery/" title="MIT6.S081 Lecture14 Ext3fs crash recovery">MIT6.S081 Lecture14 Ext3fs crash recovery</a><time datetime="2022-01-30T09:02:37.100Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/30/Lec12--%20Crash%20Recovery/" title="MIT6.S081 Lecture13 Crash Recovery">MIT6.S081 Lecture13 Crash Recovery</a><time datetime="2022-01-30T09:02:37.098Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/30/Lec11--%20File%20System/" title="MIT6.S081 Lecture12 File system on xv6">MIT6.S081 Lecture12 File system on xv6</a><time datetime="2022-01-30T09:02:37.096Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/30/Lec10--%20synchronize/" title="MIT6.S081 Lecture11 Machinery about synchronize">MIT6.S081 Lecture11 Machinery about synchronize</a><time datetime="2022-01-30T09:02:37.095Z" title="Created 2022-01-30 17:02:37">2022-01-30</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/6-824/"><span class="card-category-list-name">6.824</span><span class="card-category-list-count">18</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm-at-Scale/"><span class="card-category-list-name">Algorithm at Scale</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Leetcode/"><span class="card-category-list-name">Leetcode</span><span class="card-category-list-count">59</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MIT6-S081/"><span class="card-category-list-name">MIT6.S081</span><span class="card-category-list-count">20</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/c/"><span class="card-category-list-name">c++</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Aurora/" style="font-size: 1.1em; color: #999">Aurora</a> <a href="/tags/BFS/" style="font-size: 1.23em; color: #999ea6">BFS</a> <a href="/tags/BST/" style="font-size: 1.1em; color: #999">BST</a> <a href="/tags/Back-Tracking/" style="font-size: 1.14em; color: #999b9d">Back Tracking</a> <a href="/tags/Binary-Search/" style="font-size: 1.14em; color: #999b9d">Binary Search</a> <a href="/tags/Bitcoin/" style="font-size: 1.1em; color: #999">Bitcoin</a> <a href="/tags/COPS/" style="font-size: 1.1em; color: #999">COPS</a> <a href="/tags/CRAQ/" style="font-size: 1.1em; color: #999">CRAQ</a> <a href="/tags/Certificate-Transparency/" style="font-size: 1.1em; color: #999">Certificate Transparency</a> <a href="/tags/DFS/" style="font-size: 1.32em; color: #99a2ae">DFS</a> <a href="/tags/DP/" style="font-size: 1.41em; color: #99a5b7">DP</a> <a href="/tags/Distributed-Systems/" style="font-size: 1.37em; color: #99a4b2">Distributed Systems</a> <a href="/tags/FaRM/" style="font-size: 1.1em; color: #999">FaRM</a> <a href="/tags/Fast-Slow-pointers/" style="font-size: 1.1em; color: #999">Fast-Slow pointers</a> <a href="/tags/Finite-State-Machine/" style="font-size: 1.14em; color: #999b9d">Finite State Machine</a> <a href="/tags/Floyd/" style="font-size: 1.1em; color: #999">Floyd</a> <a href="/tags/Frangipani/" style="font-size: 1.1em; color: #999">Frangipani</a> <a href="/tags/Greedy/" style="font-size: 1.28em; color: #99a0aa">Greedy</a> <a href="/tags/Heap/" style="font-size: 1.1em; color: #999">Heap</a> <a href="/tags/Interval/" style="font-size: 1.1em; color: #999">Interval</a> <a href="/tags/Iteration/" style="font-size: 1.1em; color: #999">Iteration</a> <a href="/tags/KV-Raft/" style="font-size: 1.14em; color: #999b9d">KV Raft</a> <a href="/tags/Lab-Note/" style="font-size: 1.32em; color: #99a2ae">Lab Note</a> <a href="/tags/LevelDB/" style="font-size: 1.1em; color: #999">LevelDB</a> <a href="/tags/MIT6-S081/" style="font-size: 1.46em; color: #99a7bb">MIT6.S081</a> <a href="/tags/MapReduce/" style="font-size: 1.1em; color: #999">MapReduce</a> <a href="/tags/Math/" style="font-size: 1.14em; color: #999b9d">Math</a> <a href="/tags/Maximum-Increasing-Subsequence/" style="font-size: 1.1em; color: #999">Maximum Increasing Subsequence</a> <a href="/tags/Memcache-FB/" style="font-size: 1.1em; color: #999">Memcache@FB</a> <a href="/tags/Memory-Order/" style="font-size: 1.1em; color: #999">Memory Order</a> <a href="/tags/Monotone-Stack/" style="font-size: 1.19em; color: #999da1">Monotone Stack</a> <a href="/tags/No-AC-first-time/" style="font-size: 1.5em; color: #99a9bf">No AC first time</a> <a href="/tags/Permutation/" style="font-size: 1.1em; color: #999">Permutation</a> <a href="/tags/Prefix-Sum/" style="font-size: 1.1em; color: #999">Prefix Sum</a> <a href="/tags/Priority-Queue/" style="font-size: 1.23em; color: #999ea6">Priority Queue</a> <a href="/tags/Pruning/" style="font-size: 1.1em; color: #999">Pruning</a> <a href="/tags/Raft/" style="font-size: 1.14em; color: #999b9d">Raft</a> <a href="/tags/Sampling-Algorithm/" style="font-size: 1.1em; color: #999">Sampling Algorithm</a> <a href="/tags/ShardKV-Storage/" style="font-size: 1.14em; color: #999b9d">ShardKV Storage</a> <a href="/tags/Spanner/" style="font-size: 1.1em; color: #999">Spanner</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">June 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">January 2022</span><span class="card-archive-list-count">20</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">December 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">November 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">September 2021</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">August 2021</span><span class="card-archive-list-count">62</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">June 2021</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">100</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-06-26T04:08:04.511Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Wang Yitao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>